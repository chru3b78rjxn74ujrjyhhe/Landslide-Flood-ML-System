{% extends "base.html" %}
{% block content %}

<header class="page-header">
    <h1>Combined Risk Dashboard</h1>
    <div class="header-meta">Real-time monitoring</div>
</header>

<div class="grid">

    <!-- LANDSLIDE RISK -->
    <div class="card">
        <h3>Landslide Risk</h3>
        <div id="landslideRisk" class="risk-box"></div>
        <canvas id="miniLS"></canvas>
    </div>

    <!-- FLOOD RISK -->
    <div class="card">
        <h3>Flood Risk</h3>
        <div id="floodRisk" class="risk-box"></div>
        <canvas id="miniFL"></canvas>
    </div>

    <!-- COMBINED RISK -->
    <div class="card wide">
        <h3>Combined Risk</h3>
        <div id="combinedRisk" class="risk-box large"></div>
        <canvas id="miniCombined"></canvas>
    </div>

    <!-- NOTIFICATIONS -->
    <div class="card wide">
        <h3>Notifications</h3>
        <ul id="globalNotif"></ul>
    </div>

    <!-- ================================ -->
    <!--     ML CONTROL BUTTONS (NEW)     -->
    <!-- ================================ -->
    <div class="card wide">
        <h3>Machine Learning Control</h3>
        <p style="margin-bottom: 10px; color: var(--muted);">
            Use these buttons to operate calibration and model training.
        </p>

        <button id="btnStartCalib"
            style="padding:10px 18px; border:none; border-radius:8px; background:#4caf50; color:white; margin-right:10px; cursor:pointer;">
            ▶ Start Calibration
        </button>

        <button id="btnStopCalib"
            style="padding:10px 18px; border:none; border-radius:8px; background:#f44336; color:white; margin-right:10px; cursor:pointer;">
            ■ Stop Calibration
        </button>

        <button id="btnTrain"
            style="padding:10px 18px; border:none; border-radius:8px; background:#2196f3; color:white; cursor:pointer;">
            ⚙ Train Model
        </button>

        <p id="mlStatusMsg" style="margin-top:15px; color:var(--text); font-size:15px;"></p>
    </div>

</div>

<script src="{{ url_for('static', filename='js/combined.js') }}"></script>
{% endblock %}
